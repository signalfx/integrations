
<!--- Generated by to-integrations-repo script in Smart Agent repo, DO NOT MODIFY HERE --->

### INSTALLATION

This integration is part of the [SignalFx Smart Agent](https://github.com/signalfx/integrations/tree/master/signalfx-agent)[](sfx_link:signalfx-agent)
as the `elasticsearch` monitor. You should first deploy the Smart Agent to the
same host as the service you want to monitor, and then continue with the
configuration instructions below.

<!--- GENERATED BY gomplate from scripts/docs/monitor-page.md.tmpl --->

# elasticsearch

Monitor Type: `elasticsearch` ([Source](https://github.com/signalfx/signalfx-agent/tree/master/internal/monitors/elasticsearch))

**Accepts Endpoints**: **Yes**

**Multiple Instances Allowed**: Yes


## Description

**This integration primarily consists of the Smart Agent monitor `elasticsearch`.
Below is an overview of that monitor.**

### Smart Agent Monitor


This monitor collects stats from Elasticsearch. It collects node, cluster
and index level stats. This monitor is compatible with the current collectd
plugin found [here] (https://github.com/signalfx/collectd-elasticsearch) in
terms of metric naming.

This monitor collects cluster level and index level stats only from the current master
in an Elasticsearch cluster by default. It is possible to override this with the
`clusterHealthStatsMasterOnly` and `indexStatsMasterOnly` config options respectively.

A simple configuration that collects only default (non-custom) metrics
looks like the following:

```yaml
monitors:
- type: elasticsearch
  host: localhost
  port: 9200
```

## Enhanced (custom) metrics

The monitor collects a subset of node stats of JVM, process, HTTP,
transport, indices and thread pool stats. It is possible to enable
enhanced stats for each stat group separately.  Note that these metrics
get categorized under the _custom_ group if you are on host-based
pricing. Here's an example:

```yaml
monitors:
- type: elasticsearch
  host: localhost
  port: 9200
  enableEnhancedHTTPStats: true
  enableEnhancedJVMStats: true
  enableEnhancedProcessStats: true
  enableEnhancedThreadPoolStats: true
  enableEnhancedTransportStats: true
  enableEnhancedNodeIndicesStats:
   - indexing
   - warmer
   - get

```

The `enableEnhancedNodeIndicesStats` option takes a list of index stats groups
for which enhanced stats will be collected. A comprehensive list of all
such available groups can be found [here](https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-nodes-stats.html#node-indices-stats).

Note that the `enableEnhancedIndexStatsForIndexGroups` is similar to
`enableEnhancedNodeIndicesStats`, but for index level stats.

## Thread Pools

By default thread pool stats from the "search" and "index" thread pools are collected. To collect
stats from other thread pools specify the `threadPools` config option:

```yaml
monitors:
- type: elasticsearch
  host: localhost
  port: 9200
  threadPools:
  - bulk
  - warmer
  - listener
```

Here is a list of valid thread pools by Elasticsearch version:

| thread pool name | ES 1.x | ES 2.0 | ES 2.1+ |
|------------------|--------|--------|--------|
| merge            | &#x2713;      |        |        |
| optimize         |&#x2713;     |        |        |
| bulk             |&#x2713;     |&#x2713;     |&#x2713;     |
| flush            |&#x2713;     |&#x2713;     |&#x2713;     |
| generic          |&#x2713;     |&#x2713;     |&#x2713;     |
| get              |&#x2713;     |&#x2713;     |&#x2713;     |
| snapshot         |&#x2713;     |&#x2713;     |&#x2713;     |
| warmer           |&#x2713;     |&#x2713;     |&#x2713;     |
| refresh          |&#x2713;     |&#x2713;     |&#x2713;     |
| fetch\_shard\_started|      |&#x2713;     |&#x2713;     |
| fetch\_shard\_store|        |&#x2713;     |&#x2713;     |
| listener         |        |&#x2713;     |&#x2713;     |
| management       |        |&#x2713;     |&#x2713;     |
| percolate        |        |&#x2713;     |&#x2713;     |
| suggest          |        |&#x2713;     |&#x2713;     |
| force\_merge      |        |        |&#x2713;     |


## Collecting index statistics

By default, the configuration parameter `indexes` is empty, which means
collect stats on all indexes. To collect statistics from a subset of
indexes, set the configuration parameter `indexes` to a list of the index
names you want to collect stats for.

The call to collect index statistics can be CPU-intensive. For this reason
SignalFx recommends using the `indexStatsIntervalSeconds` configuration
parameter to decrease the reporting interval for nodes that report index
statistics.

### Primaries vs total
By default the monitor collects a subset of index stats of total aggregation
type (see docs for details). It is possible to enable index stats of primaries
aggregation type too. Total for an index stat aggregates across all shards.
Whereas, Primaries only reflect the stats from primary shards. An example
configuration to enable index stats from Primary shards too:

```yaml
monitors:
- type: elasticsearch
  host: localhost
  port: 9200
  enableIndexStatsPrimaries: true
```

## Built-in content

For more information on the built-in content we have for Elasticsearch,
[see
here](https://github.com/signalfx/integrations/tree/master/elasticsearch).


## Configuration

To activate this monitor in the Smart Agent, add the following to your
agent config:

```
monitors:  # All monitor config goes under this key
 - type: elasticsearch
   ...  # Additional config
```

**For a list of monitor options that are common to all monitors, see [Common
Configuration](https://github.com/signalfx/signalfx-agent/tree/master/docs/monitors/../monitor-config.md#common-configuration).**


| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `host` | **yes** | `string` |  |
| `port` | **yes** | `string` |  |
| `username` | no | `string` | Username used to access Elasticsearch stats API |
| `password` | no | `string` | Password used to access Elasticsearch stats API |
| `useHTTPS` | no | `bool` | Whether to use https or not (**default:** `false`) |
| `cluster` | no | `string` | Cluster name to which the node belongs. This is an optional config that will override the cluster name fetched from a node and will be used to populate the plugin_instance dimension |
| `enableIndexStats` | no | `bool` | Enable Index stats. If set to true, by default the a subset of index stats will be collected (see docs for list of default index metrics collected). (**default:** `true`) |
| `indexes` | no | `list of strings` | Indexes to collect stats from (by default stats from all indexes are collected) |
| `indexStatsIntervalSeconds` | no | `integer` | Interval to report IndexStats on (**default:** `60`) |
| `indexSummaryOnly` | no | `bool` | Collect only aggregated index stats across all indexes (**default:** `false`) |
| `indexStatsMasterOnly` | no | `bool` | Collect index stats only from Master node (**default:** `true`) |
| `enableClusterHealth` | no | `bool` | EnableClusterHealth enables reporting on the cluster health (**default:** `true`) |
| `clusterHealthStatsMasterOnly` | no | `bool` | Whether or not non master nodes should report cluster health (**default:** `true`) |
| `enableEnhancedHTTPStats` | no | `bool` | Enable enhanced HTTP stats (**default:** `false`) |
| `enableEnhancedJVMStats` | no | `bool` | Enable enhanced JVM stats (**default:** `false`) |
| `enableEnhancedProcessStats` | no | `bool` | Enable enhanced Process stats (**default:** `false`) |
| `enableEnhancedThreadPoolStats` | no | `bool` | Enable enhanced ThreadPool stats (**default:** `false`) |
| `enableEnhancedTransportStats` | no | `bool` | Enable enhanced Transport stats (**default:** `false`) |
| `enableEnhancedNodeIndicesStats` | no | `list of strings` | Enable enhanced node level index stats groups. A list of index stats groups for which to collect enhanced stats |
| `threadPools` | no | `list of strings` | ThreadPools to report threadpool node stats on (**default:** `[search index]`) |
| `enableEnhancedClusterHealthStats` | no | `bool` | Enable Cluster level stats. These stats report only from master Elasticserach nodes (**default:** `false`) |
| `enableEnhancedIndexStatsForIndexGroups` | no | `list of strings` | Enable enhanced index level index stats groups. A list of index stats groups for which to collect enhanced stats |
| `enableIndexStatsPrimaries` | no | `bool` | To enable index stats from only primary shards. By default the index stats collected are aggregated across all shards (**default:** `false`) |
| `metadataRefreshIntervalSeconds` | no | `integer` | How often to refresh metadata about the node and cluster (**default:** `30`) |


## Metrics

These are the metrics available for this monitor.
Metrics that are categorized as
[container/host](https://docs.signalfx.com/en/latest/admin-guide/usage.html#about-custom-bundled-and-high-resolution-metrics)
(*default*) are ***in bold and italics*** in the list below.


#### Group cluster
All of the following metrics are part of the `cluster` metric group. All of
the non-default metrics below can be turned on by adding `cluster` to the
monitor config option `extraGroups`:
 - ***`elasticsearch.cluster.active-primary-shards`*** (*gauge*)<br>    Number of active primary shards
 - ***`elasticsearch.cluster.active-shards`*** (*gauge*)<br>    Number of active shards
 - `elasticsearch.cluster.active-shards-percent` (*gauge*)<br>    Percentaage of shards active
 - `elasticsearch.cluster.delayed-unassigned-shards` (*gauge*)<br>    Number of delayed unassigned shards
 - `elasticsearch.cluster.in-flight-fetches` (*gauge*)<br>    Number of fetches in-flight
 - `elasticsearch.cluster.initializing-shards` (*gauge*)<br>    Number of shards being initialized
 - ***`elasticsearch.cluster.number-of-data_nodes`*** (*gauge*)<br>    Number of data nodes
 - ***`elasticsearch.cluster.number-of-nodes`*** (*gauge*)<br>    Number of nodes
 - `elasticsearch.cluster.pending-tasks` (*gauge*)<br>    Number of pending tasks
 - ***`elasticsearch.cluster.relocating-shards`*** (*gauge*)<br>    Number of shards being relocated
 - `elasticsearch.cluster.status` (*gauge*)<br>    Cluster stats (0, 1, 2 for green, yellow and red respectively)
 - `elasticsearch.cluster.task-max-wait-time` (*gauge*)<br>    Max time a task has to wait
 - ***`elasticsearch.cluster.unassigned-shards`*** (*gauge*)<br>    Number of unassigned shards

#### Group indices/completion
All of the following metrics are part of the `indices/completion` metric group. All of
the non-default metrics below can be turned on by adding `indices/completion` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.completion.size` (*gauge*)<br>    Size used by suggest completion (in bytes)

#### Group indices/docs
All of the following metrics are part of the `indices/docs` metric group. All of
the non-default metrics below can be turned on by adding `indices/docs` to the
monitor config option `extraGroups`:
 - ***`elasticsearch.indices.docs.count`*** (*gauge*)<br>    Number of docs
 - ***`elasticsearch.indices.docs.deleted`*** (*gauge*)<br>    Number of docs deleted

#### Group indices/fielddata
All of the following metrics are part of the `indices/fielddata` metric group. All of
the non-default metrics below can be turned on by adding `indices/fielddata` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.fielddata.evictions` (*cumulative*)<br>    Number of evictions from fielddata cache
 - `elasticsearch.indices.fielddata.memory-size` (*gauge*)<br>    Size of fielddata cache (in bytes)

#### Group indices/filter-cache
All of the following metrics are part of the `indices/filter-cache` metric group. All of
the non-default metrics below can be turned on by adding `indices/filter-cache` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.filter-cache.evictions` (*cumulative*)<br>    Number of evicttions from filter cache
 - `elasticsearch.indices.filter-cache.memory-size` (*gauge*)<br>    Filter cache size (in bytes)

#### Group indices/flush
All of the following metrics are part of the `indices/flush` metric group. All of
the non-default metrics below can be turned on by adding `indices/flush` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.flush.periodic` (*gauge*)<br>    How long to wait before triggering a flush regardless of translog size
 - `elasticsearch.indices.flush.total` (*cumulative*)<br>    Number of index flushes to disk
 - `elasticsearch.indices.flush.total-time` (*cumulative*)<br>    Time spent flushing the index to disk

#### Group indices/get
All of the following metrics are part of the `indices/get` metric group. All of
the non-default metrics below can be turned on by adding `indices/get` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.get.current` (*gauge*)<br>    Number of get requests running
 - `elasticsearch.indices.get.exists-time` (*cumulative*)<br>    Time spent on get requests where the document existed
 - `elasticsearch.indices.get.exists-total` (*cumulative*)<br>    Number of get requests where the document existed
 - `elasticsearch.indices.get.missing-time` (*cumulative*)<br>    Time spent on get requests where the document was missing
 - `elasticsearch.indices.get.missing-total` (*cumulative*)<br>    Number of get requests where the document was missing
 - `elasticsearch.indices.get.time` (*cumulative*)<br>    Time spent on get requests
 - ***`elasticsearch.indices.get.total`*** (*cumulative*)<br>    Total number of get requests

#### Group indices/id-cache
All of the following metrics are part of the `indices/id-cache` metric group. All of
the non-default metrics below can be turned on by adding `indices/id-cache` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.id-cache.memory-size` (*gauge*)<br>    Size of id cache (in bytes)

#### Group indices/indexing
All of the following metrics are part of the `indices/indexing` metric group. All of
the non-default metrics below can be turned on by adding `indices/indexing` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.indexing.delete-current` (*gauge*)<br>    Number of documents currently being deleted from an index
 - `elasticsearch.indices.indexing.delete-time` (*cumulative*)<br>    Time spent deleting documents from an index
 - `elasticsearch.indices.indexing.delete-total` (*cumulative*)<br>    Number of documents deleted from an index
 - `elasticsearch.indices.indexing.index-current` (*gauge*)<br>    Number of documents currently being indexed to an index
 - `elasticsearch.indices.indexing.index-failed` (*gauge*)<br>    Number of failed indices
 - `elasticsearch.indices.indexing.index-time` (*cumulative*)<br>    Time spent indexing documents to an index
 - ***`elasticsearch.indices.indexing.index-total`*** (*cumulative*)<br>    Total number of documents indexed to an index
 - `elasticsearch.indices.indexing.noop-update-total` (*cumulative*)<br>    Number of noop updates
 - `elasticsearch.indices.indexing.throttle-time` (*cumulative*)<br>    Throttle time

#### Group indices/merges
All of the following metrics are part of the `indices/merges` metric group. All of
the non-default metrics below can be turned on by adding `indices/merges` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.merges.auto-throttle-size` (*cumulative*)<br>    Merging throttled due to auto-throttling (in bytes)
 - ***`elasticsearch.indices.merges.current`*** (*gauge*)<br>    Number of currently active segment merges
 - `elasticsearch.indices.merges.current-docs` (*gauge*)<br>    Number of docs currently being merged
 - `elasticsearch.indices.merges.current-size` (*gauge*)<br>    Size of the segments currently being merged
 - `elasticsearch.indices.merges.stopped-time` (*cumulative*)<br>    Total time merges were stopped for
 - `elasticsearch.indices.merges.throttle-time` (*cumulative*)<br>    Total time merges spent waiting due to throttling
 - ***`elasticsearch.indices.merges.total`*** (*cumulative*)<br>    Number of segment merges
 - `elasticsearch.indices.merges.total-docs` (*cumulative*)<br>    Number of merged docs across merged segments
 - `elasticsearch.indices.merges.total-size` (*cumulative*)<br>    Total size of merged segments
 - `elasticsearch.indices.merges.total-time` (*cumulative*)<br>    Total time spent on merging

#### Group indices/percolate
All of the following metrics are part of the `indices/percolate` metric group. All of
the non-default metrics below can be turned on by adding `indices/percolate` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.percolate.current` (*gauge*)<br>    Number of percolator queries currently running
 - `elasticsearch.indices.percolate.queries` (*cumulative*)<br>    Number of percolator queries
 - `elasticsearch.indices.percolate.time` (*cumulative*)<br>    Total time spent on percolate requests
 - `elasticsearch.indices.percolate.total` (*cumulative*)<br>    Total number of suggest requests

#### Group indices/query-cache
All of the following metrics are part of the `indices/query-cache` metric group. All of
the non-default metrics below can be turned on by adding `indices/query-cache` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.query-cache.cache-count` (*gauge*)<br>    Number of items in query cache
 - `elasticsearch.indices.query-cache.cache-size` (*gauge*)<br>    Size of query cache (in bytes)
 - `elasticsearch.indices.query-cache.evictions` (*cumulative*)<br>    Number of query cache evictions
 - `elasticsearch.indices.query-cache.hit-count` (*cumulative*)<br>    Number of query cache hits
 - `elasticsearch.indices.query-cache.memory-size` (*gauge*)<br>    Size of query cache (in bytes)
 - `elasticsearch.indices.query-cache.total-count` (*cumulative*)<br>    Total number of items in the query cache

#### Group indices/recovery
All of the following metrics are part of the `indices/recovery` metric group. All of
the non-default metrics below can be turned on by adding `indices/recovery` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.recovery.current-as-source` (*gauge*)<br>    Number of ongoing recoveries for which a shard serves as a source
 - `elasticsearch.indices.recovery.current-as-target` (*gauge*)<br>    Number of ongoing recoveries for which a shard serves as a target
 - `elasticsearch.indices.recovery.throttle-time` (*cumulative*)<br>    Total time recoveries waited due to throttling

#### Group indices/refresh
All of the following metrics are part of the `indices/refresh` metric group. All of
the non-default metrics below can be turned on by adding `indices/refresh` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.refresh.listeners` (*gauge*)<br>    Number of listeners waiting for a refresh
 - `elasticsearch.indices.refresh.total` (*cumulative*)<br>    Total number of index refreshes
 - `elasticsearch.indices.refresh.total-time` (*cumulative*)<br>    Total time spent on index refreshes

#### Group indices/request-cache
All of the following metrics are part of the `indices/request-cache` metric group. All of
the non-default metrics below can be turned on by adding `indices/request-cache` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.query-cache.miss-count` (*cumulative*)<br>    Number of query cache misses
 - `elasticsearch.indices.request-cache.evictions` (*cumulative*)<br>    Number of request cache evictions
 - `elasticsearch.indices.request-cache.hit-count` (*cumulative*)<br>    Number of request cache hits
 - `elasticsearch.indices.request-cache.memory-size` (*gauge*)<br>    Memory used by request cache (in bytes)
 - `elasticsearch.indices.request-cache.miss-count` (*cumulative*)<br>    Number of request cache misses

#### Group indices/search
All of the following metrics are part of the `indices/search` metric group. All of
the non-default metrics below can be turned on by adding `indices/search` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.search.fetch-current` (*gauge*)<br>    Number of query fetches currently running
 - `elasticsearch.indices.search.fetch-time` (*cumulative*)<br>    Total time spent on query fetches
 - `elasticsearch.indices.search.fetch-total` (*cumulative*)<br>    Total number of query feches
 - `elasticsearch.indices.search.open-contexts` (*gauge*)<br>    Number of open contexts
 - `elasticsearch.indices.search.query-current` (*gauge*)<br>    Number of currently active queries
 - ***`elasticsearch.indices.search.query-time`*** (*cumulative*)<br>    Total time spent querying on the primary
 - ***`elasticsearch.indices.search.query-total`*** (*cumulative*)<br>    Total number of queries
 - `elasticsearch.indices.search.scroll-current` (*gauge*)<br>    Currently active scroll queries count
 - `elasticsearch.indices.search.scroll-time` (*cumulative*)<br>    Total time spent on scroll queries
 - `elasticsearch.indices.search.scroll-total` (*cumulative*)<br>    Total number of scroll queries
 - `elasticsearch.indices.search.suggest-current` (*gauge*)<br>    Number of suggest requests currently active
 - `elasticsearch.indices.search.suggest-time` (*cumulative*)<br>    Total time spent on search suggest
 - `elasticsearch.indices.search.suggest-total` (*cumulative*)<br>    Total number of suggest requests

#### Group indices/segments
All of the following metrics are part of the `indices/segments` metric group. All of
the non-default metrics below can be turned on by adding `indices/segments` to the
monitor config option `extraGroups`:
 - ***`elasticsearch.indices.segments.count`*** (*gauge*)<br>    Number of segments in an index shard
 - `elasticsearch.indices.segments.doc-values-memory-size` (*gauge*)<br>    Memory used by doc values
 - `elasticsearch.indices.segments.fixed-bit-set-memory-size` (*gauge*)<br>    Memory used by fixed bit set
 - `elasticsearch.indices.segments.index-writer-max-memory-size` (*gauge*)<br>    Maximum memory used by the index writer
 - `elasticsearch.indices.segments.index-writer-memory-size` (*gauge*)<br>    Memory used by the index writer
 - `elasticsearch.indices.segments.memory-size` (*gauge*)<br>    Memory used by index segments (in bytes)
 - `elasticsearch.indices.segments.norms-memory-size` (*gauge*)<br>    Memory used by norms (in bytes)
 - `elasticsearch.indices.segments.points-memory-size` (*gauge*)<br>    Memory used by points
 - `elasticsearch.indices.segments.stored-field-memory-size` (*gauge*)<br>    Memory used by stored fields (in bytes)
 - `elasticsearch.indices.segments.term-vectors-memory-size` (*gauge*)<br>    Memory used by term vectors (in bytes)
 - `elasticsearch.indices.segments.terms-memory-size` (*gauge*)<br>    Memory used by terms (in bytes)
 - `elasticsearch.indices.segments.version-map-memory-size` (*gauge*)<br>    Memory used by segment version map (in bytes)

#### Group indices/store
All of the following metrics are part of the `indices/store` metric group. All of
the non-default metrics below can be turned on by adding `indices/store` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.store.size` (*gauge*)<br>    Total size (in bytes)
 - `elasticsearch.indices.store.throttle-time` (*cumulative*)<br>    Total time requests are throttled for

#### Group indices/suggest
All of the following metrics are part of the `indices/suggest` metric group. All of
the non-default metrics below can be turned on by adding `indices/suggest` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.suggest.current` (*gauge*)<br>    Number of currently active suggest requests
 - `elasticsearch.indices.suggest.time` (*cumulative*)<br>    Total time spent in suggest requests
 - `elasticsearch.indices.suggest.total` (*cumulative*)<br>    Total number of suggest requests

#### Group indices/translog
All of the following metrics are part of the `indices/translog` metric group. All of
the non-default metrics below can be turned on by adding `indices/translog` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.translog.earliest_last_modified_age` (*gauge*)<br>    Earliest last modified age on transaction logs
 - `elasticsearch.indices.translog.operations` (*gauge*)<br>    Number of operations in the transaction log
 - `elasticsearch.indices.translog.size` (*gauge*)<br>    Size of the transaction log
 - `elasticsearch.indices.translog.uncommitted_operations` (*gauge*)<br>    Number of uncommitted operations in the transaction log
 - `elasticsearch.indices.translog.uncommitted_size_in_bytes` (*gauge*)<br>    Size of uncommitted transaction logs (in bytes)

#### Group indices/warmer
All of the following metrics are part of the `indices/warmer` metric group. All of
the non-default metrics below can be turned on by adding `indices/warmer` to the
monitor config option `extraGroups`:
 - `elasticsearch.indices.warmer.current` (*gauge*)<br>    Number of currently active warmers
 - `elasticsearch.indices.warmer.total` (*cumulative*)<br>    Total number of warmers
 - `elasticsearch.indices.warmer.total-time` (*cumulative*)<br>    Total time spent by warmers

#### Group node/http
All of the following metrics are part of the `node/http` metric group. All of
the non-default metrics below can be turned on by adding `node/http` to the
monitor config option `extraGroups`:
 - `elasticsearch.http.current_open` (*gauge*)<br>    Number of currently open HTTP connections
 - `elasticsearch.http.total_open` (*cumulative*)<br>    Total number of opened HTTP connections

#### Group node/jvm
All of the following metrics are part of the `node/jvm` metric group. All of
the non-default metrics below can be turned on by adding `node/jvm` to the
monitor config option `extraGroups`:
 - `elasticsearch.jvm.classes.current-loaded-count` (*gauge*)<br>    Number of classes currently loaded
 - `elasticsearch.jvm.classes.total-loaded-count` (*cumulative*)<br>    Number of classes loaded
 - `elasticsearch.jvm.classes.total-unloaded-count` (*cumulative*)<br>    Total number of classes unloaded
 - `elasticsearch.jvm.gc.count` (*cumulative*)<br>    Total number of garbage collections
 - `elasticsearch.jvm.gc.old-count` (*cumulative*)<br>    Total number of garbage collections on Old Gen
 - `elasticsearch.jvm.gc.old-time` (*cumulative*)<br>    Total time spent in garbage collections on Old Gen
 - ***`elasticsearch.jvm.gc.time`*** (*cumulative*)<br>    Total time spent on GC
 - `elasticsearch.jvm.mem.buffer_pools.direct.count` (*gauge*)<br>    Number of direct buffer pools
 - `elasticsearch.jvm.mem.buffer_pools.direct.total_capacity_in_bytes` (*gauge*)<br>    Total capacity of direct buffer pools
 - `elasticsearch.jvm.mem.buffer_pools.direct.used_in_bytes` (*gauge*)<br>    Memory used by direct buffer pools (in bytes)
 - `elasticsearch.jvm.mem.buffer_pools.mapped.count` (*gauge*)<br>    Number of buffers in the mapped pool
 - `elasticsearch.jvm.mem.buffer_pools.mapped.total_capacity_in_bytes` (*gauge*)<br>    Total capacity of the buffers in the mapped pool
 - `elasticsearch.jvm.mem.buffer_pools.mapped.used_in_bytes` (*gauge*)<br>    Memory used by mapped buffer pools (in bytes)
 - ***`elasticsearch.jvm.mem.heap-committed`*** (*gauge*)<br>    Memory guaranteed to be available to JVM heap
 - `elasticsearch.jvm.mem.heap-max` (*gauge*)<br>    Max memory that can be used by JVM heap (in bytes)
 - ***`elasticsearch.jvm.mem.heap-used`*** (*gauge*)<br>    Memory current being used by JVM heap (in bytes)
 - `elasticsearch.jvm.mem.heap-used-percent` (*gauge*)<br>    Percent of heap being used
 - `elasticsearch.jvm.mem.non-heap-committed` (*gauge*)<br>    Memory guaranteed to be available to JVM non-heap
 - `elasticsearch.jvm.mem.non-heap-used` (*gauge*)<br>    Memory current being used by JVM non-heap (in bytes)
 - `elasticsearch.jvm.mem.pools.old.max_in_bytes` (*gauge*)<br>    Memory used by Old Gen (in bytes)
 - `elasticsearch.jvm.mem.pools.old.peak_max_in_bytes` (*gauge*)<br>    Memory pool Old Gen peak max (in bytes)
 - `elasticsearch.jvm.mem.pools.old.peak_used_in_bytes` (*gauge*)<br>    Peak memory used by Old Gen (in bytes)
 - `elasticsearch.jvm.mem.pools.old.used_in_bytes` (*gauge*)<br>    Memory being used by Old Gen (in bytes)
 - `elasticsearch.jvm.mem.pools.survivor.max_in_bytes` (*gauge*)<br>    Max memory that can be used by Survivor space (in bytes)
 - `elasticsearch.jvm.mem.pools.survivor.peak_max_in_bytes` (*gauge*)<br>    Memory used by Survivor space (in bytes)
 - `elasticsearch.jvm.mem.pools.survivor.peak_used_in_bytes` (*gauge*)<br>    Peak memory used by Survivor space (in bytes)
 - `elasticsearch.jvm.mem.pools.survivor.used_in_bytes` (*gauge*)<br>    Memory being used currently by Survivor space (in bytes)
 - `elasticsearch.jvm.mem.pools.young.max_in_bytes` (*gauge*)<br>    Max memory (in bytes) that can be used by Young Gen
 - `elasticsearch.jvm.mem.pools.young.peak_max_in_bytes` (*gauge*)<br>    Memory pool Young Gen peak max (in bytes)
 - `elasticsearch.jvm.mem.pools.young.peak_used_in_bytes` (*gauge*)<br>    Memory pool Young Gen peak used (in bytes)
 - `elasticsearch.jvm.mem.pools.young.used_in_bytes` (*gauge*)<br>    Memory used by Young Gen (in bytes)
 - `elasticsearch.jvm.threads.count` (*gauge*)<br>    Number of active threads in the JVM
 - `elasticsearch.jvm.threads.peak` (*gauge*)<br>    Peak number of threads used
 - `elasticsearch.jvm.uptime` (*cumulative*)<br>    Uptime of JVM

#### Group node/process
All of the following metrics are part of the `node/process` metric group. All of
the non-default metrics below can be turned on by adding `node/process` to the
monitor config option `extraGroups`:
 - `elasticsearch.process.cpu.percent` (*gauge*)<br>    CPU usage in percent
 - `elasticsearch.process.cpu.time` (*cumulative*)<br>    CPU time (in milliseconds) used by the process on which the Java virtual machine is running
 - `elasticsearch.process.max_file_descriptors` (*gauge*)<br>    Number of opened file descriptors associated with the current process
 - `elasticsearch.process.mem.total-virtual-size` (*cumulative*)<br>    Size in bytes of virtual memory that is guaranteed to be available to the running process
 - ***`elasticsearch.process.open_file_descriptors`*** (*gauge*)<br>    Number of currently open file descriptors

#### Group node/thread-pool
All of the following metrics are part of the `node/thread-pool` metric group. All of
the non-default metrics below can be turned on by adding `node/thread-pool` to the
monitor config option `extraGroups`:
 - `elasticsearch.thread_pool.active` (*gauge*)<br>    Number of active threads
 - `elasticsearch.thread_pool.completed` (*cumulative*)<br>    Number of threads completed in thread pool
 - `elasticsearch.thread_pool.largest` (*gauge*)<br>    Highest active threads in thread pool
 - `elasticsearch.thread_pool.queue` (*gauge*)<br>    Number of Tasks in thread pool
 - ***`elasticsearch.thread_pool.rejected`*** (*cumulative*)<br>    Number of rejected threads in thread pool
 - `elasticsearch.thread_pool.threads` (*cumulative*)<br>    Number of Threads in thread pool

#### Group node/transport
All of the following metrics are part of the `node/transport` metric group. All of
the non-default metrics below can be turned on by adding `node/transport` to the
monitor config option `extraGroups`:
 - `elasticsearch.transport.rx.count` (*cumulative*)<br>    Total size of data received in cluster communication (in bytes)
 - `elasticsearch.transport.rx.size` (*cumulative*)<br>    Total size of data received in cluster communication
 - `elasticsearch.transport.server_open` (*gauge*)<br>    Total number of connections opened for cluster communication
 - `elasticsearch.transport.tx.count` (*cumulative*)<br>    Total number of packets sent in cluster communication
 - `elasticsearch.transport.tx.size` (*cumulative*)<br>    Total size of data sent in cluster communication

### Non-default metrics (version 4.7.0+)

**The following information applies to the agent version 4.7.0+ that has
`enableBuiltInFiltering: true` set on the top level of the agent config.**

To emit metrics that are not _default_, you can add those metrics in the
generic monitor-level `extraMetrics` config option.  Metrics that are derived
from specific configuration options that do not appear in the above list of
metrics do not need to be added to `extraMetrics`.

To see a list of metrics that will be emitted you can run `agent-status
monitors` after configuring this monitor in a running agent instance.

### Legacy non-default metrics (version < 4.7.0)

**The following information only applies to agent version older than 4.7.0. If
you have a newer agent and have set `enableBuiltInFiltering: true` at the top
level of your agent config, see the section above. See upgrade instructions in
[Old-style whitelist filtering](https://github.com/signalfx/signalfx-agent/tree/master/docs/monitors/../legacy-filtering.md#old-style-whitelist-filtering).**

If you have a reference to the `whitelist.json` in your agent's top-level
`metricsToExclude` config option, and you want to emit metrics that are not in
that whitelist, then you need to add an item to the top-level
`metricsToInclude` config option to override that whitelist (see [Inclusion
filtering](https://github.com/signalfx/signalfx-agent/tree/master/docs/monitors/../legacy-filtering.md#inclusion-filtering).  Or you can just
copy the whitelist.json, modify it, and reference that in `metricsToExclude`.

## Dimensions

The following dimensions may occur on metrics emitted by this monitor.  Some
dimensions may be specific to certain metrics.

| Name | Description |
| ---  | ---         |
| `aggregation` | Aggregation of index metrics. Whether the value of the metric is from the primary shard only or across all shards. Valid values - primaries, total respectively (only on index stats) |
| `cluster` | Name of Elasticsearch the cluster. |
| `index` | Name of index (only on per index mertics) |
| `node_id` | ID of a Elasticsearch node (only on node mertics) |
| `node_name` | Human readable name of a node (only on node mertics) |
| `plugin_instance` | Name of the Elasticsearch cluster. For compatibility with collectd/elasticsearch built-in content |
| `thread_pool` | Name of thread pool (only on thread pool mertics) |



