
<!--- Generated by to-integrations-repo script in Smart Agent repo, DO NOT MODIFY HERE --->

### INSTALLATION

This integration is part of the [SignalFx Smart Agent](https://github.com/signalfx/integrations/tree/master/signalfx-agent)[](sfx_link:signalfx-agent)
as the `collectd/openstack` monitor. You should first deploy the Smart Agent to the
same host as the service you want to monitor, and then continue with the
configuration instructions below.

<!--- GENERATED BY (This comment exists for maintaining compatibility with to-product-docs) --->

## Description

This integration primarily consists of the Smart Agent monitor `collectd/openstack`.
Below is an overview of that monitor.

### Smart Agent Monitor


Monitors [Openstack](https://www.openstack.org/) by using the [Openstack
collectd Python plugin](https://github.com/signalfx/collectd-openstack),
which collects metrics from Openstack instances.  This plugin is installed
with the Smart Agent, so no additional installation is required to use this
montior.

This monitor covers the following Openstack components:

* Nova (Compute)
* Cinder (BlockStorge)
* Neutron (Network)

Please see the reference for OpenStack [Monitoring](https://wiki.openstack.org/wiki/Operations/Monitoring).

<!--- SETUP --->
### Deployment Host

Identify a host on which the SignalFx agent will run. This integration
collects data from OpenStack remotely via APIs, and so those API endpoints
must be visible to the host on which the agent runs.  We do not recommend
installing the agent directly on a compute instance because a compute
instance/resource under one project cannot get stats about the resources
under other projects. Also, a compute instance may go down due to lack of
resources in the project.

<!--- SETUP --->
### Example config
```yaml
monitors:
- type: collectd/openstack
  authURL: "http://192.168.11.111/identity/v3"
  username: "admin"
  password: "secret"
  requestBatchSize: 10
  novaListServersSearchOpts:
    all_tenants: "TRUE"
    status: "ACTIVE"
```
### Example config using skipVerify and disabling querying server metrics
```yaml
monitors:
- type: collectd/openstack
  authURL: "https://192.168.11.111/identity/v3"
  username: "admin"
  password: "secret"
  skipVerify: true
  queryServerMetrics: false
  queryHypervisorMetrics: false
```


## Configuration

To activate this monitor in the Smart Agent, add the following to your
agent config:

```
monitors:  # All monitor config goes under this key
 - type: collectd/openstack
   ...  # Additional config
```

**For a list of monitor options that are common to all monitors, see [Common
Configuration](https://github.com/signalfx/signalfx-agent/tree/main/docs/monitors/../monitor-config.md#common-configuration).**


| Config option | Required | Type | Description |
| --- | --- | --- | --- |
| `pythonBinary` | no | `string` | Path to a python binary that should be used to execute the Python code. If not set, a built-in runtime will be used.  Can include arguments to the binary as well. |
| `authURL` | **yes** | `string` | Keystone authentication URL/endpoint for the OpenStack cloud |
| `username` | **yes** | `string` | Username to authenticate with keystone identity |
| `password` | **yes** | `string` | Password to authenticate with keystone identity |
| `projectName` | no | `string` | Specify the name of Project to be monitored (**default**:"demo") |
| `projectDomainID` | no | `string` | The project domain (**default**:"default") |
| `regionName` | no | `string` | The region name for URL discovery, defaults to the first region if multiple regions are available. |
| `userDomainID` | no | `string` | The user domain id (**default**:"default") |
| `skipVerify` | no | `bool` | Skip SSL certificate validation (**default:** `false`) |
| `httpTimeout` | no | `float64` | The HTTP client timeout in seconds for all requests (**default:** `0`) |
| `requestBatchSize` | no | `integer` | The maximum number of concurrent requests for each metric class (**default:** `5`) |
| `queryServerMetrics` | no | `bool` | Whether to query server metrics (useful to disable for TripleO Undercloud) (**default:** `true`) |
| `queryHypervisorMetrics` | no | `bool` | Whether to query hypervisor metrics (useful to disable for TripleO Undercloud) (**default:** `true`) |
| `novaListServersSearchOpts` | no | `map of strings` | Optional search_opts mapping for collectd-openstack Nova client servers.list(search_opts=novaListServerSearchOpts). For more information see https://docs.openstack.org/api-ref/compute/#list-servers. |


## Metrics

Metrics that are categorized as
[container/host](https://docs.splunk.com/observability/admin/subscription-usage/monitor-imm-billing-usage.html#about-custom-bundled-and-high-resolution-metrics)
(*default*) are ***in bold and italics*** in the list below.

These are the metrics available for this integration.

 - `counter.openstack.nova.server.cpu_time` (*counter*)<br>    Virtual CPU time consumed in nanoseconds
 - ***`counter.openstack.nova.server.rx`*** (*counter*)<br>    Size of network packet received in bytes
 - ***`counter.openstack.nova.server.rx_packets`*** (*counter*)<br>    Received packets at an instance
 - ***`counter.openstack.nova.server.tx`*** (*counter*)<br>    Size of network packet transmitted in bytes
 - ***`counter.openstack.nova.server.tx_packets`*** (*counter*)<br>    Transmitted packets at an instance
 - ***`gauge.openstack.cinder.limit.maxTotalBackupGigabytes`*** (*gauge*)<br>    Maximum backup space available at cinder component for project in Gigabytes
 - ***`gauge.openstack.cinder.limit.maxTotalBackups`*** (*gauge*)<br>    Total available backups used at cinder component for project
 - ***`gauge.openstack.cinder.limit.maxTotalSnapshots`*** (*gauge*)<br>    Total available snapshots at cinder component for project
 - ***`gauge.openstack.cinder.limit.maxTotalVolumeGigabytes`*** (*gauge*)<br>    Total available block storage at cinder component for project
 - ***`gauge.openstack.cinder.limit.maxTotalVolumes`*** (*gauge*)<br>    Maximum volume resources available at cinder component for project
 - ***`gauge.openstack.cinder.limit.totalBackupGigabytesUsed`*** (*gauge*)<br>    Total backup space used at cinder component for project in Gigabytes
 - ***`gauge.openstack.cinder.limit.totalBackupsUsed`*** (*gauge*)<br>    Total backups used at cinder component for project
 - ***`gauge.openstack.cinder.limit.totalGigabytesUsed`*** (*gauge*)<br>    Total block storage used at cinder component for project
 - ***`gauge.openstack.cinder.limit.totalSnapshotsUsed`*** (*gauge*)<br>    Total snapshots used at cinder component for project
 - ***`gauge.openstack.cinder.limit.totalVolumesUsed`*** (*gauge*)<br>    Volume resources used at cinder component for project
 - ***`gauge.openstack.cinder.snapshot.count`*** (*gauge*)<br>    Total number of snapshots at cinder component for project
 - ***`gauge.openstack.cinder.snapshot.size`*** (*gauge*)<br>    Total snapshot size at cinder component for project
 - ***`gauge.openstack.cinder.volume.count`*** (*gauge*)<br>    Total number of volumes at cinder component for project
 - ***`gauge.openstack.cinder.volume.size`*** (*gauge*)<br>    Total volume size at cinder component for project
 - ***`gauge.openstack.neutron.floatingip.count`*** (*gauge*)<br>    Overall floating IPs used across projects
 - ***`gauge.openstack.neutron.network.count`*** (*gauge*)<br>    Overall Network resources used across projects
 - ***`gauge.openstack.neutron.router.count`*** (*gauge*)<br>    Overall router resources used across projects
 - ***`gauge.openstack.neutron.securitygroup.count`*** (*gauge*)<br>    Overall securitygroup resources used across projects
 - ***`gauge.openstack.neutron.subnet.count`*** (*gauge*)<br>    Overall subnet resources used in all projects
 - ***`gauge.openstack.nova.hypervisor.current_workload`*** (*gauge*)<br>    Total current active hypervisor tasks in project
 - ***`gauge.openstack.nova.hypervisor.disk_available_least`*** (*gauge*)<br>    Minimum free disk space available in Gigabyte
 - ***`gauge.openstack.nova.hypervisor.free_disk_gb`*** (*gauge*)<br>    Maximum free disk space available in Gigabyte
 - ***`gauge.openstack.nova.hypervisor.free_ram_mb`*** (*gauge*)<br>    Maximum free ram space available in Megabyte
 - `gauge.openstack.nova.hypervisor.load_average` (*gauge*)<br>    Average CPU load on the hypervisor
 - ***`gauge.openstack.nova.hypervisor.local_gb`*** (*gauge*)<br>    Maximum available local disk space in Gigabyte
 - ***`gauge.openstack.nova.hypervisor.local_gb_used`*** (*gauge*)<br>    Total disk space used in Gigabyte
 - ***`gauge.openstack.nova.hypervisor.memory_mb`*** (*gauge*)<br>    Maximum available memory in MB at hypervisor
 - ***`gauge.openstack.nova.hypervisor.memory_mb_used`*** (*gauge*)<br>    Total memory used in MB at hypervisor
 - ***`gauge.openstack.nova.hypervisor.running_vms`*** (*gauge*)<br>    Total running VMs at hypervisor
 - ***`gauge.openstack.nova.hypervisor.vcpus`*** (*gauge*)<br>    Available physical cores at hypervisor
 - ***`gauge.openstack.nova.hypervisor.vcpus_used`*** (*gauge*)<br>    Used virtual CPUs used
 - ***`gauge.openstack.nova.limit.maxImageMeta`*** (*gauge*)<br>    Maximum number of metadata items associated with an image for project
 - ***`gauge.openstack.nova.limit.maxSecurityGroups`*** (*gauge*)<br>    Maximum available security groups for project
 - ***`gauge.openstack.nova.limit.maxTotalCores`*** (*gauge*)<br>    Maximum available VCPUs in project
 - ***`gauge.openstack.nova.limit.maxTotalFloatingIps`*** (*gauge*)<br>    Maximum available floating IPs for project
 - ***`gauge.openstack.nova.limit.maxTotalInstances`*** (*gauge*)<br>    Maximum available instances in project
 - ***`gauge.openstack.nova.limit.maxTotalKeypairs`*** (*gauge*)<br>    Maximum available keypairs for project
 - ***`gauge.openstack.nova.limit.maxTotalRAMSize`*** (*gauge*)<br>    Maximum available RAM size for project
 - ***`gauge.openstack.nova.limit.totalCoresUsed`*** (*gauge*)<br>    Total cores used in the project
 - ***`gauge.openstack.nova.limit.totalFloatingIpsUsed`*** (*gauge*)<br>    Total floating IPs used in the project
 - ***`gauge.openstack.nova.limit.totalInstancesUsed`*** (*gauge*)<br>    Total instances used in the project
 - ***`gauge.openstack.nova.limit.totalRAMUsed`*** (*gauge*)<br>    Total RAM used in the project
 - ***`gauge.openstack.nova.limit.totalSecurityGroupsUsed`*** (*gauge*)<br>    Total RAM used in the project
 - ***`gauge.openstack.nova.server.memory`*** (*gauge*)<br>    Memory provisioned at an instance
 - ***`gauge.openstack.nova.server.memory-actual`*** (*gauge*)<br>    Actual memory used at an instance
 - ***`gauge.openstack.nova.server.memory-rss`*** (*gauge*)<br>    Memory used not including disk pages at an instance
 - ***`gauge.openstack.nova.server.vda_read`*** (*gauge*)<br>    Size of virtual disk read requests in bytes
 - ***`gauge.openstack.nova.server.vda_read_req`*** (*gauge*)<br>    Virtual disk read requests from an instance
 - ***`gauge.openstack.nova.server.vda_write`*** (*gauge*)<br>    Size of virtual disk write requests in bytes
 - ***`gauge.openstack.nova.server.vda_write_req`*** (*gauge*)<br>    Virtual disk write requests from an instance

### Non-default metrics (version 4.7.0+)

**The following information applies to the agent version 4.7.0+ that has
`enableBuiltInFiltering: true` set on the top level of the agent config.**

To emit metrics that are not _default_, you can add those metrics in the
generic monitor-level `extraMetrics` config option.  Metrics that are derived
from specific configuration options that do not appear in the above list of
metrics do not need to be added to `extraMetrics`.

To see a list of metrics that will be emitted you can run `agent-status
monitors` after configuring this monitor in a running agent instance.

### Legacy non-default metrics (version < 4.7.0)

**The following information only applies to agent versions prior to 4.7.0. If
you have a newer agent and have set `enableBuiltInFiltering: true` at the top
level of your agent config, see the section above. See upgrade instructions in
[Old-style inclusion list filtering](https://github.com/signalfx/signalfx-agent/tree/main/docs/monitors/../legacy-filtering.md#old-style-inclusion-list-filtering).**

If you have a reference to the `whitelist.json` in your agent's top-level
`metricsToExclude` config option, and you want to emit metrics that are not in
that allow list, then you need to add an item to the top-level
`metricsToInclude` config option to override that allow list (see [Inclusion
filtering](https://github.com/signalfx/signalfx-agent/tree/main/docs/monitors/../legacy-filtering.md#inclusion-filtering).  Or you can just
copy the whitelist.json, modify it, and reference that in `metricsToExclude`.

## Dimensions

The following dimensions may occur on metrics emitted by the monitors. Some
dimensions may be specific to certain metrics.

#### collectd/openstack monitor

| Name | Description |
| ---  | ---         |
| `plugin` | This is always set to `openstack`. |
| `plugin_instance` | This will contain the project id and name of the project given in the configuration. |
